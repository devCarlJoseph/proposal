<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lourdes Eatery Inventory</title>
    <link rel="icon" type="image/x-icon" href="src/images/logo.png">
    <!-- Load Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous">
    <link rel="stylesheet" href="src/css/inventory.css">    
    <!-- Load Bootstrap JS bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>

    <script src="src/js/inventory.js"></script>

</head>

<body>

    <!-- Main Container where content is rendered -->
    <div id="appContainer" class="container py-5">
        <!-- Content will be injected here by JS based on login state -->
    </div>

    <!-- 1. Add/Edit/Use Modal -->
    <div id="itemModal" class="custom-modal-overlay d-none" tabindex="-1">
        <div class="custom-modal-content">
            <h5 class="modal-title fw-bold mb-4" id="modalTitle">Add New Ingredient</h5>
            <form id="itemForm">
                <input type="hidden" id="itemId" name="itemId">

                <!-- Ingredient Name (Visible for Add/Edit) -->
                <div class="mb-3" id="nameGroup">
                    <label for="itemName" class="form-label small fw-semibold">Ingredient Name</label>
                    <input type="text" class="form-control rounded-pill" id="itemName" name="itemName"
                        placeholder="e.g., Flour, Tomatoes" required>
                </div>

                <!-- Quantity Input (Visible for Add/Edit/Use) -->
                <div class="mb-3" id="quantityGroup">
                    <label for="quantity" class="form-label small fw-semibold">Quantity</label>
                    <div id="currentStockDisplay" class="mb-2 small text-muted d-none"></div>
                    <input type="number" class="form-control rounded-pill" id="quantity" name="quantity" required
                        min="0" step="any">
                    <!-- Error message for invalid quantity input (d-none added here for clean state) -->
                    <div id="modalErrorMsg" class="invalid-feedback small d-none"></div>
                </div>

                <!-- Unit Input (Visible for Add/Edit) -->
                <div class="mb-4" id="unitGroup">
                    <label for="unit" class="form-label small fw-semibold">Unit</label>
                    <input type="text" class="form-control rounded-pill" id="unit" name="unit"
                        placeholder="e.g., kg, pcs, g" required>
                </div>

                <!-- Action Button -->
                <button type="submit" class="btn btn-theme w-100 rounded-pill shadow" id="modalSubmitBtn">Add
                    Item</button>
            </form>
            <button type="button" class="btn btn-outline-secondary w-100 rounded-pill mt-2"
                onclick="hideModal('itemModal')">Cancel</button>
        </div>
    </div>

    <!-- 2. Delete Confirmation Modal (Individual Item) -->
    <div id="confirmModal" class="custom-modal-overlay d-none" tabindex="-1">
        <div class="custom-modal-content text-center">
            <h5 class="modal-title fw-bold mb-3 text-warning">Confirm Deletion</h5>
            <p class="mb-4">Are you sure you want to delete <span id="confirmItemName" class="fw-bold"></span>?</p>
            <button type="button" class="btn btn-danger rounded-pill shadow me-2" id="confirmDeleteBtn">Yes,
                Delete</button>
            <button type="button" class="btn btn-outline-secondary rounded-pill"
                onclick="hideModal('confirmModal')">Cancel</button>
        </div>
    </div>

    <!-- 3. Reset Confirmation Modal (Full Inventory) -->
    <div id="resetConfirmModal" class="custom-modal-overlay d-none" tabindex="-1">
        <div class="custom-modal-content text-center">
            <h5 class="modal-title fw-bold mb-3 text-danger"> Reset All Data</h5>
            <p class="mb-4">This will permanently clear all inventory data from your inventory. Are you sure you want
                to reset?</p>
            <button type="button" class="btn btn-danger rounded-pill shadow me-2" onclick="resetInventory()">Yes, Reset
                Everything</button>
            <button type="button" class="btn btn-outline-secondary rounded-pill"
                onclick="hideModal('resetConfirmModal')">Cancel</button>
        </div>
    </div>

    <!-- 4. NEW Logout Confirmation Modal (Session) -->
    <div id="logoutConfirmModal" class="custom-modal-overlay d-none" tabindex="-1">
        <div class="custom-modal-content text-center">
            <h5 class="modal-title fw-bold mb-3 text-logout-color"> Confirm Logout</h5>
            <p class="mb-4">Are you sure you want to log out? This will end your session and require you to log back in.
            </p>
            <button type="button" class="btn btn-logout rounded-pill shadow me-2" onclick="performLogout()"><a class="text-decoration-none text-white"
                    href="index.html">Yes, Log
                    Out</a></button>
            <button type="button" class="btn btn-outline-secondary rounded-pill"
                onclick="hideModal('logoutConfirmModal')">Cancel</button>
        </div>
    </div>

</body>

</html>